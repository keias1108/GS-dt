<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Gray-Scott + dt(temperature) hierarchy (single HTML)</title>
    <link rel="stylesheet" href="styles/main.css" />
  </head>
  <body>
    <div class="wrap">
      <canvas id="c"></canvas>

      <div class="panel">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
          "
        >
          <div>
            <div style="font-weight: 800; font-size: 14px">
              Grayâ€“Scott + dt ê³„ì¸µ(ì˜¨ë„)
            </div>
            <div class="hint">
              ì—ë„ˆì§€(í™œë™ë„)â†‘ â†’ dtâ†“(ë¹ ë¥¸ ë¯¸ì‹œ), ì—ë„ˆì§€â†“ â†’ dtâ†‘(ëŠë¦° ê±°ì‹œ/â€˜êµ³ìŒâ€™)
            </div>
          </div>
          <span class="badge" id="fps">FPS: -</span>
        </div>

        <div class="hr"></div>

        <div class="grid2">
          <button id="runBtn">â–¶ Run</button>
          <button class="secondary" id="stepBtn">Step</button>
          <button class="secondary" id="seedBtn">Reseed</button>
          <button class="danger" id="clearBtn">Clear</button>
        </div>

        <div class="hr"></div>

        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin: 8px 0;">
          <button class="secondary" id="saveJsonBtn" title="Download settings as JSON">ğŸ’¾ Save JSON</button>
          <button class="secondary" id="loadJsonBtn" title="Load settings from JSON">ğŸ“‚ Load JSON</button>
          <button class="secondary" id="saveLocalBtn" title="Save to localStorage">ğŸ’¾ Save Local</button>
          <button class="secondary" id="resetBtn" title="Reset to default values" style="grid-column: span 3;">ğŸ”„ Reset to Defaults</button>
        </div>
        <input type="file" id="fileInput" accept=".json" style="display: none;" />

        <div class="hr"></div>

        <div class="row">
          <label>View</label>
          <select id="viewSel">
            <option value="V">V (pattern)</option>
            <option value="U">U</option>
            <option value="dt">dt map</option>
            <option value="E">energy map</option>
          </select>
        </div>

        <div class="row">
          <label>Energy metric</label>
          <select id="energySel">
            <option value="react">E = UÂ·VÂ² (reaction)</option>
            <option value="grad">E = |âˆ‡U|Â² + |âˆ‡V|Â² (structure)</option>
            <option value="time">E = |dU| + |dV| (activity)</option>
            <option value="mix">Mix (0.5 react + 0.5 grad)</option>
          </select>
        </div>

        <div class="row">
          <label>Mix Î± (only for Mix)</label>
          <input
            id="mixA"
            type="range"
            min="0"
            max="1"
            step="0.01"
            value="0.5"
          />
          <input id="mixATxt" class="param-input" type="number" min="0" max="1" step="0.01" value="0.50" />
        </div>

        <div class="hr"></div>

        <div class="row">
          <label>Du</label>
          <input
            id="du"
            type="range"
            min="0"
            max="1"
            step="0.001"
            value="0.16"
          />
          <input id="duTxt" class="param-input" type="number" min="0" max="1" step="0.001" value="0.160" />
        </div>
        <div class="row">
          <label>Dv</label>
          <input
            id="dv"
            type="range"
            min="0"
            max="1"
            step="0.001"
            value="0.08"
          />
          <input id="dvTxt" class="param-input" type="number" min="0" max="1" step="0.001" value="0.080" />
        </div>

        <div class="row">
          <label>Feed (F)</label>
          <input
            id="F"
            type="range"
            min="0"
            max="0.08"
            step="0.0001"
            value="0.035"
          />
          <input id="FTxt" class="param-input" type="number" min="0" max="0.08" step="0.0001" value="0.0350" />
        </div>
        <div class="row">
          <label>Kill (k)</label>
          <input
            id="k"
            type="range"
            min="0"
            max="0.08"
            step="0.0001"
            value="0.060"
          />
          <input id="kTxt" class="param-input" type="number" min="0" max="0.08" step="0.0001" value="0.0600" />
        </div>

        <div class="hr"></div>

        <div class="row">
          <label>dt_min</label>
          <input id="dtMin" type="number" step="0.001" value="0.20" />
        </div>
        <div class="row">
          <label>dt_max</label>
          <input id="dtMax" type="number" step="0.001" value="1.50" />
        </div>

        <div class="row">
          <label>Temp scale (T)</label>
          <input
            id="temp"
            type="range"
            min="0.001"
            max="1"
            step="0.001"
            value="0.08"
          />
          <input id="tempTxt" class="param-input" type="number" min="0.001" max="1" step="0.001" value="0.080" />
        </div>

        <div class="row">
          <label>Energy EMA (smoothing)</label>
          <input
            id="ema"
            type="range"
            min="0"
            max="0.99"
            step="0.01"
            value="0.80"
          />
          <input id="emaTxt" class="param-input" type="number" min="0" max="0.99" step="0.01" value="0.80" />
        </div>

        <div class="row">
          <label>Steps / frame</label>
          <input id="spf" type="range" min="1" max="20" step="1" value="6" />
          <input id="spfTxt" class="param-input" type="number" min="1" max="20" step="1" value="6" />
        </div>

        <div class="row">
          <label>Brush (mouse)</label>
          <select id="brushSel">
            <option value="V">Add V</option>
            <option value="U">Add U</option>
            <option value="UV">Add both</option>
            <option value="erase">Erase (reset to U=1,V=0)</option>
          </select>
        </div>

        <div class="row">
          <label>Brush radius</label>
          <input id="br" type="range" min="1" max="40" step="1" value="10" />
          <input id="brTxt" class="param-input" type="number" min="1" max="40" step="1" value="10" />
        </div>

        <div class="hint">
          <b>"ê³„ì¸µ ëŠë‚Œ" ì²´í¬ í¬ì¸íŠ¸</b><br />
          1) Viewë¥¼ <span class="badge">dt map</span>ìœ¼ë¡œ ë°”ê¿”ì„œ 'ì°¨ê°€ìš´(í° dt)'
          ì˜ì—­ì´ íŒ¨í„´ì˜ "êµ³ì€ í”ì "ê³¼ ê²¹ì¹˜ëŠ”ì§€ ë³´ê¸°<br />
          2) Feed/killì„ ì¡°ê¸ˆì”© ë°”ê¿¨ì„ ë•Œ, ì¼ë¶€ êµ¬ì¡°ê°€ ë” ì˜¤ë˜ ë‚¨ê±°ë‚˜ ëŠë¦¬ê²Œ
          ë³€í•˜ë©´ dt-ê³„ì¸µì´ ë¨¹íŒ ê²ƒ<br />
          3) <span class="badge">energy=grad</span> ë˜ëŠ”
          <span class="badge">mix</span>ê°€ "ê°ì²´í™”(ê²½ê³„/ì§€í˜•)"ì— ë” ìœ ë¦¬í•œ í¸<br /><br />
          <b>ë‹¨ì¶•í‚¤:</b> Alt+Z (Reseed) | Alt+S (Save JSON) | Space (Run/Pause)
        </div>
      </div>
    </div>


    <script type="module" src="js/main.js"></script>
  </body>
</html>
